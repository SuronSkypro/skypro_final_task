<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>Что такое CI/CD</title>
    <link rel="stylesheet" href="css/cicd.css">
</head>
<body>

<div class="container">
    <h1>Что такое CI/CD</h1>

    <a href="https://habr.com/ru/companies/otus/articles/515078/"> Информация с сайта habr.com </a><br><br>

<b><i>В преддверии старта курса <a href="https://otus.pw/Tuse/">«CI/CD на AWS, Azure и Gitlab»</a> подготовили для вас перевод полезного материала.</i></b><br/>
<br/>
<hr/><br/>
Непрерывная интеграция (Continuous Integration, CI) и непрерывная поставка (Continuous Delivery, CD) представляют собой культуру, набор принципов и практик, которые позволяют разработчикам чаще и надежнее развертывать изменения программного обеспечения.<br/>
<br/>
CI/CD — это <a href="https://www.infoworld.com/article/3268053/devops-best-practices-the-5-methods-you-should-adopt.html">одна из DevOps-практик</a>. Она также относится и к <a href="https://www.infoworld.com/article/3237508/what-is-agile-methodology-modern-software-development-explained.html">agile-практикам</a>: автоматизация развертывания позволяет разработчикам сосредоточиться на реализации бизнес-требований, на качестве кода и безопасности.<a name="habracut"></a><br/>
<br/>
<h3>Определение CI/CD</h3><br/>
<a href="https://www.infoworld.com/article/3295900/what-is-continuous-integration-ci-faster-better-software-development.html">Непрерывная интеграция</a> — это методология разработки и набор практик, при которых в код вносятся небольшие изменения с частыми коммитами. И поскольку большинство современных приложений разрабатываются с использованием различных платформ и инструментов, то появляется необходимость в механизме интеграции и тестировании вносимых изменений.<br/>
<br/>
С технической точки зрения, цель CI — обеспечить последовательный и автоматизированный способ сборки, упаковки и тестирования приложений. При налаженном процессе непрерывной интеграции разработчики с большей вероятностью будут делать частые коммиты, что, в свою очередь, будет способствовать улучшению коммуникации и повышению качества программного обеспечения.<br/>
<br/>
Непрерывная поставка начинается там, где заканчивается непрерывная интеграция. Она автоматизирует развертывание приложений в различные окружения: большинство разработчиков работают как с продакшн-окружением, так и со средами разработки и тестирования.<br/>
<br/>
Инструменты CI/CD помогают настраивать специфические параметры окружения, которые конфигурируются при развертывании. А также CI/CD-автоматизация выполняет необходимые запросы к веб-серверам, базам данных и другим сервисам, которые могут нуждаться в перезапуске или выполнении каких-то дополнительных действий при развертывании приложения.<br/>
<br/>
Непрерывная интеграция и непрерывная поставка нуждаются в <a href="https://www.infoworld.com/article/3289104/how-to-align-test-automation-with-agile-and-devops.html">непрерывном тестировании</a>, поскольку конечная цель — разработка качественных приложений. Непрерывное тестирование часто реализуется в виде набора различных автоматизированных тестов (регрессионных, производительности и других), которые выполняются в CI/CD-конвейере.<br/>
<br/>
Зрелая практика CI/CD позволяет реализовать непрерывное развертывание: при успешном прохождении кода через CI/CD-конвейер, сборки автоматически развертываются в продакшн-окружении. Команды, практикующие непрерывную поставку, могут позволить себе ежедневное или даже ежечасное развертывание. Хотя здесь стоит отметить, что <a href="http://blogs.starcio.com/2017/04/continuous-deployment-right-for-your-business.html">непрерывная поставка подходит не для всех бизнес-приложений</a>.<br/>
<br/>
<h3>Непрерывная интеграция улучшает коммуникации и качество</h3><br/>
Непрерывная интеграция — это методология разработки, основанная на регламентированных процессах и автоматизации. При внедренной непрерывной интеграции разработчики часто коммитят свой код в репозиторий исходного кода. И большинство команд придерживается правила коммитить как минимум один раз в день. При небольших изменениях проще выявлять дефекты и различные проблемы, чем при больших изменениях, над которыми работали в течение длительного периода времени. Кроме того, работа с короткими циклами коммитов уменьшает вероятность изменения одной и той же части кода несколькими разработчиками, что может привести к конфликтам при слиянии.<br/>
<br/>
Команды, внедряющие непрерывную интеграцию, часто начинают с настройки системы контроля версий и определения порядка работы. Несмотря на то что коммиты делаются часто, реализация фич и исправление багов могут выполняться довольно долго. Для контроля того, какие фичи и код готовы существует несколько подходов.<br/>
<br/>
Многие используют фича-флаги (feature flag) — механизм для включения и выключения функционала в рантайме. Функционал, который еще находится в стадии разработки, оборачивается фича-флагами и развертывается из master-ветки в продакшн, но отключается до тех пор, пока не будет полностью готов к использованию. По данным <a href="https://www.atlassian.com/software-development/practices">недавнего исследования</a> 63 процента команд, использующих фича-флаги, говорят об улучшении тестируемости и повышении качества программного обеспечения. Для работы с фича-флагами есть специальные инструменты, такие как <a href="https://rollout.io/">CloudBees Rollout</a>, <a href="https://www.optimizely.com/rollouts/?ref=nav">Optimizely Rollouts</a> и <a href="https://launchdarkly.com/">LaunchDarkly</a>, которые интегрируются в CI/CD и позволяют выполнять конфигурацию на уровне фич.<br/>
<br/>
Другой способ работы с фичами — использование веток в системе контроля версий. В этом случае надо определить модель ветвления (например, такую как Gitflow) и описать как код попадает в ветки разработки, тестирования и продакшена. Для фич с длительным циклом разработки создаются отдельные фича-ветки. После завершения работы над фичей разработчики сливают изменения из фича-ветки в основную ветку разработки. Такой подход работает хорошо, но может быть неудобен, если одновременно разрабатывается много фич.<br/>
<br/>
Этап сборки заключается в автоматизации упаковки необходимого программного обеспечения, базы данных и других компонент. Например, если вы разрабатываете Java-приложение, то CI упакует все статические файлы, такие как HTML, CSS и JavaScript, вместе с Java-приложением и скриптами базы данных.<br/>
<br/>
CI не только упакует все компоненты программного обеспечения и базы данных, но также автоматически выполнит модульные тесты и другие виды тестирования. Такое тестирование позволяет разработчикам получить обратную связь о том, что сделанные изменения ничего не сломали.<br/>
<br/>
Большинство CI/CD-инструментов позволяет запускать сборку вручную, по коммиту или по расписанию. Командам необходимо обсудить расписание сборки, которое подходит для них в зависимости от численности команды, ожидаемого количества ежедневных коммитов и других критериев. Важно, чтобы коммиты и сборка были быстрыми, иначе долгая сборка может стать препятствием для разработчиков, пытающихся быстро и часто коммитить.<br/>
<br/>
<h3>Непрерывное тестирование — это больше, чем автоматизация тестирования</h3><br/>
Фреймворки для автоматизированного тестирования помогают QA-инженерам разрабатывать, запускать и автоматизировать различные виды тестов, которые помогают разработчикам отслеживать успешность сборки. Тестирование включает в себя функциональные тесты, разрабатываемые в конце каждого спринта и объединяемые в регрессионные тесты для всего приложения. Регрессионные тесты информируют команду: не сломали ли их изменения что-то в другой части приложения.<br/>
<br/>
Лучшая практика заключается в том, чтобы требовать от разработчиков запускать все или часть регрессионных тестов в своих локальных окружениях. Это гарантирует, что разработчики будут коммитить уже проверенный код.<br/>
<br/>
Регрессионные тесты — это только начало. Тестирование производительности, тестирование API, статический анализ кода, тестирование безопасности — эти и другие виды тестирования тоже можно автоматизировать. Ключевым моментом является возможность запуска этих тестов из командной строки, через веб-хук (webhook) или через веб-сервис и возврат результата выполнения: успешный был тест или нет. <br/>
<br/>
Непрерывное тестирование подразумевает не только автоматизацию, но и интеграцию автоматического тестирования в конвейер CI/CD. Модульные и функциональные тесты могут быть частью CI и выявлять проблемы до или во время запуска CI-конвейера. Тесты, требующие развертывания полного окружения, такие как тестирование производительности и безопасности, часто являются частью CD и выполняются после разворачивания сборок в целевых средах.<br/>
<br/>
<h3>CD-конвейер автоматизирует поставку изменений в различные окружения</h3><br/>
Непрерывная поставка — это автоматическое развертывание приложения в целевое окружение. Обычно разработчики работают с одним или несколькими окружениями разработки и тестирования, в которых приложение развертывается для тестирования и ревью. Для этого используются такие CI/CD-инструменты как <a href="https://www.infoworld.com/article/3239666/devops/what-is-jenkins-the-ci-server-explained.html">Jenkins</a>, CircleCI, AWS CodeBuild, Azure DevOps, Atlassian Bamboo, Travis CI.<br/>
<br/>
Типичный CD-конвейер состоит из этапов сборки, тестирования и развертывания. Более сложные конвейеры включают в себя следующие этапы:<br/>
<br/>
<ul>
<li>Получение кода из системы контроля версий и выполнение сборки.</li>
<li>Настройка инфраструктуры, автоматизированной через подход “инфраструктура как код”.</li>
<li>Копирование кода в целевую среду.</li>
<li>Настройка переменных окружения для целевой среды.</li>
<li>Развертывание компонентов приложения (веб-серверы, API-сервисы, базы данных).</li>
<li>Выполнение дополнительных действий, таких как перезапуск сервисов или вызов сервисов, необходимых для работоспособности новых изменений.</li>
<li>Выполнение тестов и откат изменений окружения в случае провала тестов.</li>
<li>Логирование и отправка оповещений о состоянии поставки.</li>
</ul><br/>
Например, в Jenkins конвейер определяется в <a href="https://jenkins.io/doc/book/pipeline/jenkinsfile/">файле</a> Jenkinsfile, в котором описываются различные этапы, такие как сборка (build), тестирование (test) и развертывание (deploy). Там же описываются переменные окружения, секретные ключи, сертификаты и другие параметры, которые можно использовать в этапах конвейера. В разделе post настраивается обработка ошибок и уведомления.<br/>
<br/>
В более сложном CD-конвейере могут быть дополнительные этапы, такие как синхронизация данных, архивирование информационных ресурсов, установка обновлений и патчей. CI/CD-инструменты обычно поддерживают плагины. Например, у <a href="https://plugins.jenkins.io/">Jenkins есть более 1500 плагинов</a> для интеграции со сторонними платформами, для расширения пользовательского интерфейса, администрирования, управления исходным кодом и сборкой.<br/>
<br/>
При использовании CI/CD-инструмента разработчики должны убедиться, что все параметры сконфигурированы вне приложения через переменные окружения. CI/CD-инструменты позволяют устанавливать значения этих переменных, маскировать пароли и ключи учетных записей, а также настраивать их во время развертывания для конкретного окружения.<br/>
Также в CD-инструментах присутствуют дашборды и отчетность. В случае сбоя сборки или поставки они оповещают об этом. При интеграции CD с системой контроля версий и agile-инструментами облегчается поиск изменений кода и пользовательских историй, вошедших в сборку.<br/>
<br/>
<h3>Реализация CI/CD-конвейеров с Kubernetes и бессерверными архитектурами</h3><br/>
Многие команды, использующие CI/CD-конвейеры в облаках используют контейнеры, такие как <a href="https://www.infoworld.com/article/3204171/what-is-docker-the-spark-for-the-container-revolution.html">Docker</a>, и системы оркестрации, такие как <a href="https://www.infoworld.com/article/3268073/what-is-kubernetes-your-next-application-platform.html">Kubernetes</a>. Контейнеры позволяют стандартизировать упаковку, поставку и упростить масштабирование и уничтожение окружений с непостоянной нагрузкой.<br/>
<br/>
Есть множество вариантов совместного использования контейнеров, инфраструктуры как код и CI/CD-конвейеров. Подробнее изучить это вы можете в статьях <a href="https://medium.com/containerum/configuring-ci-cd-on-kubernetes-with-jenkins-89eab7234270">Kubernetes with Jenkins</a> и <a href="https://cloudblogs.microsoft.com/opensource/2018/11/27/tutorial-azure-devops-setup-cicd-pipeline-kubernetes-docker-helm/">Kubernetes with Azure DevOps</a>.<br/>
<br/>
Архитектура бессерверных вычислений представляет собой еще один способ развертывания и масштабирования приложений. В бессерверном окружении инфраструктурой полностью управляет поставщик облачных услуг, а приложение потребляет ресурсы по мере необходимости в соответствии с его настройками. Например, в AWS бессерверные приложения запускаются через <a href="https://aws.amazon.com/lambda/features/">функции AWS Lambda</a>, развертывание которых может быть <a href="https://aws.amazon.com/blogs/compute/continuous-integration-deployment-for-aws-lambda-functions-with-jenkins-and-grunt-part-2/">интегрировано в CI/CD-конвейер Jenkins</a> с помощью плагина.<br/>
<br/>
<h3>CI/CD обеспечивает более частое развертывание кода</h3><br/>
Итак, подведем итоги. CI упаковывает, тестирует сборки и оповещает разработчиков, если что-то пошло не так. CD автоматически разворачивает приложения и выполняет дополнительные тесты.<br/>
<br/>
CI/CD-конвейеры предназначены для организаций, которым необходимо часто вносить изменения в приложения с надежным процессом поставки. Помимо стандартизации сборки, разработки тестов и автоматизации развертываний мы получаем целостный производственный процесс по развертыванию изменений кода. Внедрение CI/CD позволяет разработчикам сосредоточиться на улучшении приложений и не тратить силы на его развертывание.<br/>
<br/>
CI/CD является одной из <a href="https://www.infoworld.com/article/3268053/devops-best-practices-the-5-methods-you-should-adopt.html">DevOps-практик</a>, поскольку направлена на борьбу с противоречиями между разработчиками, которые хотят часто вносить изменения, и эксплуатацией, требующей стабильности. Благодаря автоматизации, разработчики могут вносить изменения чаще, а команды эксплуатации, в свою очередь, получают большую стабильность, поскольку конфигурация окружений стандартизирована и в процессе поставки осуществляется непрерывное тестирование. Также настройка переменных окружения отделена от приложения и присутствуют автоматизированные процедуры отката.<br/>
<br/>

</div>
<a href="index.html"> На главную</a>
</body>
</html>